(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1503:function(n,o,e){"use strict";e.r(o),e.d(o,"loadApp",(function(){return y}));var t=e(81),a=e.n(t),i=e(112),r=e.n(i),c=e(85),s=e(107),l=e(83),w=e(86),d=e(92),u=e(22);window.React=a.a;let p=null;function g(n){const o=Object(u.b)(n);return{screen:o.location.substring(1),params:o.params}}function f(n){decodeURIComponent(window.location.hash)!==p&&function(n){if(!window.matrixChat)return;console.log("Routing URL ",n.href);const o=g(n);window.matrixChat.showScreen(o.screen,o.params)}(window.location)}function m(n,o=!1){console.log("newscreen "+n);const e="#/"+n;p=e,o?window.location.replace(e):window.location.assign(e)}function h(n){let o=n.hs_url+"/#/register";const e=Object.keys(n);for(let t=0;t<e.length;++t){o+=0===t?"?":"&";const a=e[t];o+=a+"="+encodeURIComponent(n[a])}return o}function b(){const n=r.a.parse(window.location.href);n.search="";const o=r.a.format(n);console.log(`Redirecting to ${o} to drop loginToken from queryparams`),window.history.replaceState(null,"",o)}async function y(n){const o=document.body.dataset.vectorIndexeddbWorkerScript;if(!o)throw Object(l.h)(Object(l.b)("Missing indexeddb worker script!"));w.a.setIndexedDbWorkerScript(o),window.addEventListener("hashchange",f);const e=s.a.get(),t=Object(u.a)(window.location),i=window.location.protocol+"//"+window.location.host+window.location.pathname;console.log("Vector starting at "+i),e.startUpdater();const r=await async function(){return d.a.get()}(),p=c.getComponent("structures.MatrixChat");return a.a.createElement(p,{onNewScreen:m,makeRegistrationUrl:h,config:r,realQueryParams:t,startingFragmentQueryParams:n,enableGuest:!r.disable_guests,onTokenLoginCompleted:b,initialScreenAfterLogin:g(window.location),defaultDeviceDisplayName:e.getDefaultDeviceDisplayName()})}}}]);
//# sourceMappingURL=element-web-app.js.map