{"version":3,"sources":["webpack:///../matrix-react-sdk-v3/src/async-components/views/dialogs/security/CreateKeyBackupDialog.js","webpack:///../matrix-react-sdk-v3/node_modules/file-saver/dist/FileSaver.min.js"],"names":["PHASE_PASSPHRASE","PHASE_DONE","CreateKeyBackupDialog","React","PureComponent","constructor","props","super","n","this","_recoveryKeyNode","copyNode","setState","copied","phase","blob","Blob","_keyBackupInfo","recovery_key","type","FileSaver","saveAs","downloaded","async","secureSecretStorage","state","info","error","accessSecretStorage","MatrixClientPeg","get","prepareKeyBackupVersion","createKeyBackupVersion","scheduleAllGroupSessionsForBackup","e","console","deleteKeyBackupVersion","version","onFinished","preventDefault","_passphraseField","current","validate","allowEmpty","valid","focus","focused","passPhrase","passPhraseConfirm","passPhraseValid","result","target","value","createRef","cli","doesServerSupportUnstableFeature","_createBackup","_renderPhasePassPhrase","DialogButtons","sdk","onSubmit","_onPassPhraseNextClick","_t","b","sub","className","onChange","_onPassPhraseChange","minScore","onValidate","_onPassPhraseValidate","fieldRef","autoFocus","label","_td","labelEnterPassword","labelStrongPassword","labelAllowedButUnsafe","primaryButton","onPrimaryButtonClick","hasCancel","disabled","kind","onClick","_onSkipPassPhraseClick","_renderPhasePassPhraseConfirm","AccessibleButton","matchText","changeText","startsWith","passPhraseMatch","element","_onSetAgainClick","_onPassPhraseConfirmNextClick","_onPassPhraseConfirmChange","placeholder","_renderPhaseShowKey","ref","_collectRecoveryKeyNode","_onCopyClick","_onDownloadClick","_renderPhaseKeepItSafe","introText","s","_onKeepItSafeBackClick","_renderBusyPhase","text","Spinner","_renderPhaseDone","_onDone","_renderPhaseOptOutConfirm","_onSetUpClick","_onCancel","_titleForPhase","render","BaseDialog","content","onCancel","title","includes","PropTypes","func","isRequired","c","a","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","send","status","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","test","userAgent","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","body","innerText","HTMLElement","safari","FileReader","k","onloadend","replace","readAsDataURL","l","m","module","exports"],"mappings":"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","file":"bundles/b979a72c9b608a56f880/4.js","sourceRoot":""}